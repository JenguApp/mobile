<div *ngIf="currentRequestDataLoaded; else loading" id="wrapper">

    <app-request-form *ngIf="!pendingRequest; else pendingRequestInformation" [user]="me"></app-request-form>
    <ng-template #pendingRequestInformation>
        <div *ngIf="pendingRequest.completed_by_id == null; else accepted" class="ion-padding" id="pending-request-area">

            <h2>Your request has been received!</h2>
            <p>Please wait while we connect you with a local Jengu.</p>
            <p>Checking for a local Jengu in...</p>

            <div class="circle__box" [class.animating]="loadingAnimating">
                <div class="circle__wrapper circle__wrapper--right">
                    <div class="circle__whole circle__right"></div>
                </div>
                <div class="circle__wrapper circle__wrapper--left">
                    <div class="circle__whole circle__left"></div>
                </div>
                <div id="refresh-time">{{nextRefreshTime}}</div>
            </div>

            <div class="submit-wrapper">
                <ion-button (click)="cancelRequest(pendingRequest)" color="danger">Cancel Request</ion-button>
            </div>

        </div>
        <ng-template #accepted>
            <ion-tabs #tabs>
                <ion-tab-bar slot="bottom">
                    <ion-tab-button tab="request-accepted-info">
                        <ion-icon name="list-outline"></ion-icon>
                    </ion-tab-button>
                    <ion-tab-button tab="thread/{{pendingRequest.completed_by_id}}">
                        <ion-icon name="chatbubble-outline"></ion-icon>
                    </ion-tab-button>
                </ion-tab-bar>
            </ion-tabs>
        </ng-template>
    </ng-template>

</div>
<ng-template #loading>
</ng-template>