<app-logged-in-header *ngIf="!location"></app-logged-in-header>

<ion-content class="ion-padding">

    <h2>{{location ? 'Update' : 'Create'}} Location</h2>

    <form [formGroup]="form">
        <ion-item>
            <ion-label position="stacked">Name</ion-label>
            <ion-input type="text" ngDefaultControl formControlName="name" [formControl]="form.controls.name" [value]="location ? location.name : ''"></ion-input>
        </ion-item>

        <div color="alert" *ngIf="submitted && !form.controls.name.valid" class="validator-error">
            Please enter your location's name.
        </div>

        <ion-item>
            <ion-label position="stacked">Address Line 1</ion-label>
            <ion-input type="text" ngDefaultControl formControlName="address_line_1" [formControl]="form.controls.address_line_1" [value]="location ? location.address_line_1 : ''"></ion-input>
        </ion-item>

        <div color="alert" *ngIf="submitted && !form.controls.address_line_1.valid" class="validator-error">
            Please the first line of your locations address.
        </div>

        <ion-item>
            <ion-label position="stacked">Address Line 2</ion-label>
            <ion-input type="text" ngDefaultControl formControlName="address_line_2" [formControl]="form.controls.address_line_2" [value]="location ? location.address_line_2 : ''"></ion-input>
        </ion-item>

        <app-country-select #countrySelectComponent [value]="location ? location.country : ''"></app-country-select>

        <div color="alert" *ngIf="countryValidationError" class="validator-error">
            Please select your country.
        </div>

        <ion-item>
            <ion-label position="stacked">City</ion-label>
            <ion-input type="text" ngDefaultControl formControlName="city" [formControl]="form.controls.city" [value]="location ? location.city : ''"></ion-input>
        </ion-item>

        <div color="alert" *ngIf="submitted && !form.controls.city.valid" class="validator-error">
            Please enter the city for the location.
        </div>

        <ion-item>
            <ion-label position="stacked">Postal Code</ion-label>
            <ion-input type="text" ngDefaultControl formControlName="postal_code" [formControl]="form.controls.postal_code" [value]="location ? location.postal_code : ''"></ion-input>
        </ion-item>

        <ion-item>
            <ion-label position="stacked">Region</ion-label>
            <ion-input type="text" ngDefaultControl formControlName="region" [formControl]="form.controls.region" [value]="location ? location.region : ''"></ion-input>
        </ion-item>

        <div class="submit-wrapper">
            <ion-button large (click)="submit()">Create</ion-button>
        </div>
    </form>

</ion-content>