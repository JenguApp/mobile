<ion-content class="ion-padding">
    <h2>Pending requests to be delivered</h2>
    <ion-list>
        <ion-item *ngFor="let pendingRequest of pendingRequests" (click)="viewRequestDetails(pendingRequest)">
            <ion-label>{{pendingRequest.requested_by.name}} - {{pendingRequest.formatCreatedAtDate()}}</ion-label>
            <ion-icon slot="end" name="arrow-forward-circle-outline"></ion-icon>
        </ion-item>
    </ion-list>

    <app-overlay-window *ngIf="currentRequest" (close)="clearCurrentRequest()" [full]="true">
        <h3>{{currentRequest.requested_by.name}}</h3>
        <h4>Requested at: {{currentRequest.formatCreatedAtDate()}}</h4>
        <ion-list>
            <ng-container *ngFor="let requestedItem of currentRequest.requested_items">
                <ion-label *ngIf="getRequestedItemName(requestedItem)">{{getRequestedItemName(requestedItem)}} - {{requestedItem.quantity}}</ion-label>
            </ng-container>
        </ion-list>
        <div class="submit-wrapper">
            <ion-button (click)="openQRCode()">Assign Request</ion-button>
        </div>
    </app-overlay-window>

    <app-overlay-window *ngIf="currentRequest && qrCodeOpen">
        <qrcode [qrdata]="'' + currentRequest?.id" [width]="256" [errorCorrectionLevel]="'M'"></qrcode>
    </app-overlay-window>
</ion-content>
